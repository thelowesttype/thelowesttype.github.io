<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N68DBSL2CT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N68DBSL2CT');
  </script>
  
  <link rel="preload" as="font" href="https://thelowesttype.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://thelowesttype.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2"  type="font/woff2" crossorigin>

  
<link rel="stylesheet" href="https://thelowesttype.github.io/main.css">


  
  
  
  
  
  
  
  
  
  
  
    
    
  

  
    
  
  
  
  
    
  

  


  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="google-site-verification" content="Y3Vf5HlD1JNkYZhwG2G13_kIBwubi7cu8yVrBdvhy2o" />
  <meta name="The Lowest Type" content="Saksham's chatter box">


	


	

<title>DWA - Helping robots move in real world | The Lowest Type</title>
<meta name="description" content="Discover how motion planning of robots is done real world">
<link rel="canonical" href="https://thelowesttype.github.io/blog/dwa-planner/">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https:&#x2F;&#x2F;i.ibb.co&#x2F;k6vQ0dg&#x2F;logo.png">
  <meta name="twitter:title" content="DWA - Helping robots move in real world">
  <meta name="twitter:description" content="Discover how motion planning of robots is done real world">
  <meta name="twitter:site" content="@codeck313">
  <meta name="twitter:creator" content="@codeck313">

  <meta property="og:title" content="DWA - Helping robots move in real world">
  <meta name="og:image" content="https:&#x2F;&#x2F;i.ibb.co&#x2F;k6vQ0dg&#x2F;logo.png">
  <meta property="og:description" content="Discover how motion planning of robots is done real world">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://thelowesttype.github.io/blog/dwa-planner/">

  
    <meta property="og:image" content="https:&#x2F;&#x2F;i.ibb.co&#x2F;k6vQ0dg&#x2F;logo.png">
  

  <meta property="og:updated_time" content="2022-07-03T07:13:50Z">
  <meta property="og:site_name" content="DWA - Helping robots move in real world">

  

  

  
  <meta property="og:locale" content="en_US">





  
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/blog/dwa-planner/"
      },
      "headline": "DWA - Helping robots move in real world",
      "image": ,
      "datePublished": "2022-07-03T07:13:50Z",
      "dateModified": "2022-07-03T07:13:50Z",
      "author": {
        "@type": "Organization",
        "name": "DWA - Helping robots move in real world"
      },
      "publisher": {
        "@type": "Organization",
        "name": "DWA - Helping robots move in real world",
        
        "logo": {
          "@type": "ImageObject",
          "url": "/logo-doks.png"
        }
        
      },
      "description": "Discover how motion planning of robots is done real world"
    }
    </script>
  





<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://thelowesttype.github.io/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Blog",
            "item": "https://thelowesttype.github.io/blog/"
          },
        
      
        
        
        
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "Dwa Planner",
            "item": "https://thelowesttype.github.io/blog/dwa-planner/"
          },
        
      
    
  }
</script>




  
  <meta name="theme-color" content="#fff">
  <link rel="apple-touch-icon" sizes="180x180" href="https://thelowesttype.github.io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://thelowesttype.github.io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://thelowesttype.github.io/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
    <link rel="manifest" href="https://thelowesttype.github.io/site.webmanifest">
  

  
  
    
      <!-- KaTeX -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    
  

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://thelowesttype.github.io/rss.xml">
  
</head>

  

<body class="preload blog single">
  <!-- <script>alert('No UI for you!');</script> -->
  <script>
    const pasing = localStorage.getItem('theme') || 'dark';
     document.body.classList.add(pasing);
  </script>
  
  
<div class="header-bar fixed-top"></div>
<header class="navbar fixed-top navbar-expand-md navbar-light">
	<div class="container">
		<input class="menu-btn order-0" type="checkbox" id="menu-btn">
		<label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
		<a class="navbar-brand order-1 order-md-0 me-auto" href="https://thelowesttype.github.io">The Lowest Type</a>
		<button id="mode" class="tdark btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
			<span class="toggle-dark">
				<svg role="img" viewBox="0 0 24 24" width="20" height="20" xmlns="http://www.w3.org/2000/svg" fill="white" class="feather feather-moon" ><path d="M23.214 8.166S22.209 7.69 21.164 8c-.782.23-1.638.824-2.125 2.055-.939 2.363-.126 6.484-.444 6.484s-1.319-3.797-2.658-7.752c-1.34-3.954-2.497-8.061-4.588-7.73-1.854.293-1.279 4.976-.553 9.362.658 3.976 1.419 7.698.984 7.698-.777.001-3.326-10.988-5.939-10.57-2.613.416.753 12.525.046 12.548-.581.019-2.006-7.37-4.121-7.031-1.602.257-.175 6.006-.109 7.61.016.402.141 1.157-.461 1.157H0v1.118h1.958c.402-.02.72-.174.881-.57.544-1.342-.884-7.042-.55-7.084.23-.028.725 1.707 1.416 3.67.69 1.963 1.383 3.995 2.696 3.995 2.83 0-.057-11.121.504-11.121.297 0 1.106 2.26 1.995 4.738 1.089 3.028 2.416 6.387 4.018 6.387 1.912 0 1.29-4.338.698-8.495-.513-3.598-1.114-6.978-.793-6.978.721 0 3.447 15.467 6.72 15.467 1.64 0 1.658-3.233 1.658-6.72 0-2.448-.204-4.68 1.331-5.217.73-.254 1.468.198 1.468.198Z"/></svg></span>
			<span class="toggle-light">
				<svg role="img" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="white" class="feather feather-moon"><path d="M8.165 6V3h7.665v3H8.165zm-.5-3H1c-.55 0-1 .45-1 1v2h7.665V3zM23 3h-6.67v3H24V4c0-.55-.45-1-1-1zM0 6.5h24V20c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V6.5zM11.5 18c0 .3.2.5.5.5h8c.3 0 .5-.2.5-.5v-1.5c0-.3-.2-.5-.5-.5h-8c-.3 0-.5.2-.5.5V18zm-5.2-4.55l-3.1 3.1c-.25.25-.25.6 0 .8l.9.9c.25.25.6.25.8 0l4.4-4.4a.52.52 0 0 0 0-.8l-4.4-4.4c-.2-.2-.6-.2-.8 0l-.9.9c-.25.2-.25.55 0 .8l3.1 3.1z"/></svg></span>
		</button>
		<ul class="navbar-nav fork-me order-3 order-md-5">
			
				
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/codeck313" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://linkedin.com/in/saksham-sharma-98678ab7" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg><span class="ms-2 visually-hidden">Linkdin</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://instagram.com/c0deck313" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-activity"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.5" y2="6.5"></line></svg><span class="ms-2 visually-hidden">Instagram</span></a>
					</li>
				
			
		</ul>
		<div class="collapse navbar-collapse order-4 order-md-1">
			<ul class="navbar-nav main-nav me-auto order-5 order-md-2">
				
					
						<li class="nav-item">
							
								<a class="nav-link" href="https://thelowesttype.github.io/projects/">Projects</a>
							
						</li>
					
						<li class="nav-item blog active">
							
								<a class="nav-link" href="https://thelowesttype.github.io/blog/">Blog</a>
							
						</li>
					
						<li class="nav-item">
							
								<a class="nav-link" href="https://thelowesttype.github.io/aboutme/">About</a>
							
						</li>
					
				
			</ul>
			<div class="break order-6 d-md-none"></div>
			
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput" class="form-control is-search" type="search" placeholder="Search site..."
						aria-label="Search docs..." autocomplete="off" >
					<div id="suggestions" class="shadow bg-white rounded"></div>
				</form>
			
		</div>
	</div>
</header>



  
<div class="wrap container" role="document">
  <div class="content">
    <div class="row justify-content-center">
      <div class="col-md-12 col-lg-10 col-xl-10">
        <article>
          <div class="blog-header">
            <h1>DWA - Helping robots move in real world</h1>
            
<p><small>Posted
        03 07 2022
        
        by <a
            class="stretched-link position-relative"
            href="https://thelowesttype.github.io/authors/saksham/">Saksham</a>
        
        &nbsp;&hyphen;&nbsp;<strong>10&nbsp;min
            read</strong></small>
    <p>

          </div>
          <p class="lead" style="text-align:center">How to get your robots to carry out their autonomous motion in real life</p>
          <p>Recently I was part of a team whose task was to figure out the motion planning for a <a href="https://www.botsync.co/botsync-copernicus.html" target="_blank">Copernicus Robot</a> such that it can avoid obstacles and reach the goal autonomously. But before we dive into how I achieved that let's get a few basics right.</p>
<blockquote>
<p>Few ideas work on the first try. Iteration is key to innovation.</p>
</blockquote>
<p><em>- Sebastian Thrun</em></p>
<h2 id="what-is-motion-planning">What is motion planning?</h2>
<p>Motion planning is a term used in robotics for the process of breaking down the desired movement task into discrete motions that satisfy movement constraints and possibly optimize some aspect of the movement.
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 100%; ">
    <figure>
        <img src="/blog/dwa-planner/dwa-traj.png" class="center"></img>
        <figcaption>Trajectory of robot moving through obstacles</figcaption>
    </figure>
</div>
<h2 id="what-are-the-usual-approaches-for-it">What are the usual approaches for it?</h2>
<p>Collision avoidance algorithm is mainly of 2 types: <i>global and local</i>. Some of the global techniques are graph-based, potential field methods and cell decomposition. You can check out the article I wrote about a <i>graph-based approach for a multirobot system <a href="https://thelowesttype.github.io/blog/multi-robo/" target="_blank">here</a></i>. Global approaches require a complete model of the robot and environment to plan the path. This makes them a bit slow to avoid fast moving obstacles and also if the environment model is not completely accurate.
<br>
Whereas local planner considers only a small part of the entire model to make the decisions. But they usually provide a solution that is less optimal and it is more prone to being stuck in local-minima. But they can make a decision at a faster pace and are able to make decisions in a partially available world model. Vector field histogram is a type of local planner approach which uses an occupancy grid to form a model of the nearby environment using sensors. Utilizing the occupancy grid and <i>Artificial Potential Field (APF)</i> it plans the path for the robot.
<br>
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 100%; ">
    <figure>
        <img src="/blog/dwa-planner/occupancy-grid.png" class="center"></img>
        <figcaption>Occupancy Grid for given map</figcaption>
    </figure>
</div>
<h2 id="shortcomings-of-previous-approaches-and-dynamic-window-approach-dwa">Shortcomings of previous approaches and Dynamic Window Approach (DWA)?</h2>
<p>All the approaches discussed above don't really take the limitations of the robot into consideration (like max acceleration). To deal with this DWA was proposed.
<br>
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 80%; ">
    <figure>
        <img src="/blog/dwa-planner/path-plotted.gif" class="center"></img>
        <figcaption>Trajectory planned by DWA</figcaption>
    </figure>
</div>
<br>
With the introduction out the way let's get to how DWA works!
<br>
<hr>
<div style="text-align: center; ">
<img src="https://media.giphy.com/media/8qJov1TOy2hI4/giphy.gif"
     style="max-width: 40%;">
<br><br>
<i>The scope of the article will mainly deal with the algorithm proposed in the original paper[1].</i>
</div>
<hr>
<h2 id="equations-defining-robot-drive">Equations defining robot drive</h2>
<p>To be able to provide with motion plan within the limitation of the robot we need to model the robot's drive (How does the robot move). To simplify things we'll consider it to be a mobile robot with a <a href="https://en.wikipedia.org/wiki/Differential_wheeled_robot" target="_blank">differential drive</a>
<br>
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 60%; ">
    <figure>
        <img src="/blog/dwa-planner/kinematics_s.png" class="center"></img>
        <figcaption>Kinematics of differential drive</figcaption>
    </figure>
</div>
<br>
General motion equations can be written as:
$$
x(t_{n}) = x(t_{0}) + \int_{t_{0}}^{t_{n}}v(t) \cdot \cos(\theta(t)) dt
\\[2em]
y(t_{n}) = y(t_{0}) + \int_{t_{0}}^{t_{n}}v(t) \cdot \sin(\theta(t)) dt
$$
where,
$$
x(t_{n})\space and\space y(t_{n})\space is\space the\space position\space of\space the\space robot\space at\space time\space t_{n}\\
and\space v(t) \space  denotes \space  velocity \space  at \space  time \space  t\\
and\space \theta(t) denotes \space  orientation \space  at \space  time \space  t
$$
Rewriting v(t) and &#952;(t) in terms of initial configuration and acceleration as:
$$
x(t_{n}) = x(t_{0}) + \int_{t_{0}}^{t_{n}} \bigg( v(t_0) + \int_{t_0}^t a(\hat{t}) d\hat{t}\bigg) \cdot \cos\bigg(\theta(t_0) + \int_{t_0}^t \Big( \omega(t_0) + \int_{t_0}^t \alpha(\hat{t}) d\hat{t} \Big) dt\bigg)\\[2em]
y(t_{n}) = y(t_{0}) + \int_{t_{0}}^{t_{n}} \bigg( v(t_0) + \int_{t_0}^t a(\hat{t}) d\hat{t}\bigg) \cdot \sin\bigg(\theta(t_0) + \int_{t_0}^t \Big( \omega(t_0) + \int_{t_0}^t \alpha(\hat{t}) d\hat{t} \Big) dt\bigg)
$$
where,
$$
a(\hat{t})\space and\space \alpha(\hat{t})\space are\space linear\space acceleration\\
and\space angular\space acceleration\\
in\space time\space interval\space \hat{t}\in[t_0,t]
$$
With this, we have equations that are based on initial configuration and acceleration only!
<br>
Considering hardware restriction, all the variable values will be discrete in nature and hence the above equations need to be discretized. Further, we can simplify them by approximating constant robot velocity for a short interval of time [t<sub>i</sub>,t<sub>i+1</sub>]. Doing so introduces error in the trajectory but because the robot's position is measured periodically we can neglect it. The final motion equation can be written as,
$$
x(t_{n}) = x(t_{0}) + \sum_{i=0}^{n-1}\int_{t_{i}}^{t_{i+1}}v_i \cdot \cos\bigg(\theta(t_i) + \omega_i \cdot (\hat{t}-t_i)\bigg)d\hat{t}\\[2em]
y(t_{n}) = y(t_{0}) + \sum_{i=0}^{n-1}\int_{t_{i}}^{t_{i+1}}v_i \cdot \sin\bigg(\theta(t_i) + \omega_i \cdot (\hat{t}-t_i)\bigg)d\hat{t}
$$
where,
$$
n\space denotes \space number \space of \space time \space intervals
$$
<p>After further simplification of the integral one can transform the above equations into a circular trajectory equation. Something like this,
$$
(F^i_x - M^i_x)^2 + (F^i_y - M^i_y)^2 = (\frac{v_i}{\omega_i})^2
$$
where,
$$
(M^i_x,M^i_y) \space represents \space center \space of \space i^{th} \space circle
$$</p>
<h2 id="dwa-approach">DWA Approach</h2>
<p>In this approach, the search for the best trajectory is done in the velocity space. The trajectory of the robot is a sequence of circular arcs. Each arc/curvature is defined by (v<sub>i</sub>,ω<sub>i</sub>). Hence from the above equations, we can say that to reach the goal point for the next n interval we need to determine (v<sub>i</sub>,ω<sub>i</sub>) for each of those n intervals.</p>
<h4 id="windowing">Windowing</h4>
<p>The way we introduce the dynamics of the robot is by limiting the velocity space being used to find the best trajectory. This operation is called windowing and it restricts the velocities to only the velocities which can be reached within a short interval of time given the max acceleration of the robot.
<br>
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 100%; ">
    <figure>
        <img src="/blog/dwa-planner/possible-traj.gif" class="center"></img>
        <figcaption>Possible Trajectories</figcaption>
    </figure>
</div>
<br>
$$
V_d = \bigg\lbrace(v,\omega) | v\in[v_a - a\cdot t,v_a+a\cdot t] \land \omega \in [\omega_a - \alpha \cdot t, \omega_a + \alpha \cdot t]\bigg\rbrace
$$
where,
$$
a \space and \space \alpha \space are \space acceleration
$$
<h4 id="avoiding-obstacles">Avoiding Obstacles</h4>
<p>The above space is then again pruned by considering the only safe trajectories. A trajectory is considered safe only when the pair (v,ω) can stop before it reaches the nearest obstacle.
$$
V_a = \bigg\lbrace(v,\omega) | v\le\sqrt{2\cdot dist(v,\omega)\cdot\dot{v_b}} \land \omega\le\sqrt{2\cdot dist(v,\omega)\cdot\dot{\omega_b}}\bigg\rbrace
$$</p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 100%; ">
    <figure>
        <img src="/blog/dwa-planner/possible-trajs-1.jpg" class="center"></img>
        <figcaption>Admissible Trajectories (Note: The obstacle was in the middle)</figcaption>
    </figure>
</div>
<br>
Finally we can write the resulting search space as
$$
V_r = V_s \cap V_a \cap V_d
$$
<h4 id="optimization-of-the-trajectory">Optimization of the trajectory</h4>
<p>Next, we need to select the best trajectory amongst the admissible ones. To do this we use the following optimization function in the V<sub>r</sub> space.
$$
G(v,\omega) = \sigma(\alpha\cdot heading(v,\omega) + \beta \cdot dist(v,\omega) + \gamma \cdot velocity(v,\omega))
$$
where,
$$
\sigma \space is \space for \space smoothing
$$
<br>
Amongst a set of given trajectory the one with highest <kbd>G(v,ω)</kbd> is selected.
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 80%; ">
    <figure>
        <img src="/blog/dwa-planner/plotted-traj.png" class="center"></img>
        <figcaption>Robot's trajectory (green - admissible traj, red - selected traj)</figcaption>
    </figure>
</div>
<br>
<h5 id="target-heading">Target Heading</h5>
<p><kbd>heading(x,ω)</kbd> function evaluates the alignment of the robot to the target heading. It is given by 180-θ, where θ is the delta between the heading of the robot after it undertakes a given trajectory and the angle goal point makes from the current position of the robot.
<br></p>
<div style="display: block; margin-left: auto; margin-right: auto; width: 40%; ">
    <figure>
        <img src="/blog/dwa-planner/heading.png" class="center"></img>
        <figcaption>Kinematics of differential drive</figcaption>
    </figure>
</div>
<h5 id="clearance">Clearance</h5>
<p><kbd>dist(x,ω)</kbd> function evaluates the minimum distance to the nearest obstacle when a given trajectory is followed. This helps to select the trajectory having the highest clearance from the obstacles.</p>
<h5 id="velocity">Velocity</h5>
<p><kbd>velocity(x,ω)</kbd> function just returns the translation velocity robot will have at the end of the trajectory. This helps to select the trajectory which goes the fastest.</p>
<h5 id="distance-to-goal">Distance to Goal</h5>
<p><kbd>goalDistance(x,ω)</kbd> function returns the distance between the robot and the goal after it undertakes the given trajectory. This is an addition to the parameters given in the paper. This helps to undertake a trajectory that brings the robot closest to the goal. This is extremely helpful when one allows negative velocities in the window.</p>
<h2 id="results">Results</h2>
<p>The algorithm was implemented in C++ and ROS was used as middleware between the program and the robot. The following were the weights and parameters of the robot.</p>
<pre data-lang="yaml" style="background-color:#282a36;color:#f8f8f2;" class="language-yaml "><code class="language-yaml" data-lang="yaml"><span style="color:#ff79c6;">PREDICT_TIME</span><span>: </span><span style="color:#bd93f9;">2.0 </span><span style="color:#6272a4;"># time interval size
</span><span style="color:#ff79c6;">HZ</span><span>: </span><span style="color:#bd93f9;">10 </span><span style="color:#6272a4;">#1/deltaT
</span><span style="color:#ff79c6;">HEADING_COST_GAIN</span><span>: </span><span style="color:#bd93f9;">0.5 </span><span style="color:#6272a4;"># Difference in heading between the traj final orientation and goal orientation at present
</span><span style="color:#ff79c6;">OBSTACLE_COST_GAIN</span><span>: </span><span style="color:#bd93f9;">1.0 </span><span style="color:#6272a4;"># Applied on the distance to the nearest obstacle
</span><span style="color:#ff79c6;">SPEED_COST_GAIN</span><span>: </span><span style="color:#bd93f9;">0.2 </span><span style="color:#6272a4;"># Cost factor for the speed, used to maximize the speed of the robot
</span><span style="color:#ff79c6;">TO_GOAL_COST_GAIN</span><span>: </span><span style="color:#bd93f9;">0.8 </span><span style="color:#6272a4;"># Cost factor on how far robot is wrt goal position
</span><span>
</span><span style="color:#ff79c6;">MAX_VELOCITY</span><span>: </span><span style="color:#bd93f9;">0.5  </span><span style="color:#6272a4;">#Max vel of robot
</span><span style="color:#ff79c6;">MIN_VELOCITY</span><span>: </span><span style="color:#bd93f9;">0.0 </span><span style="color:#6272a4;">#Min vel of robot
</span><span style="color:#ff79c6;">MAX_ACCELERATION</span><span>: </span><span style="color:#bd93f9;">1.0 </span><span style="color:#6272a4;">#Max acc of robot
</span><span style="color:#ff79c6;">MAX_YAWRATE</span><span>: </span><span style="color:#bd93f9;">0.8 </span><span style="color:#6272a4;">#Max angular vel of robot
</span><span style="color:#ff79c6;">MAX_D_YAWRATE</span><span>: </span><span style="color:#bd93f9;">2.0 </span><span style="color:#6272a4;">#Max angular acceleration of robot
</span></code></pre>
<h5 id="implementation-result">Implementation Result</h5>
<p>Video of simulation and implementation on a real robot can be seen here:</p>
<div style="text-align: center;">
    <iframe width="80%" height="400em"
    src="https://www.youtube.com/embed/yLrRWCSwlro">
    </iframe>
</div>
<br>
<div style="text-align: center;">
    <iframe width="80%" height="400em"
    src="https://www.youtube.com/embed/2iJl4U1oKJc">
    </iframe>
</div>
<br>
<h2 id="observations">Observations</h2>
<p>As we discussed in the usual approaches local planning gets stuck in local minima and hence needs some additional force (recovery behavior)to get out of it. In the given implementation this part was lacking and hence to mimick recovery behavior the robot was rotated by hand so that it could come out of the given minima. Another realization that happened while making the program was that DWA requires a fast loop time and hence algorithms implemented on python aren't best suited for this purpose.</p>
<h2 id="up-next">Up-Next</h2>
<p>The code base is available <a href="https://github.com/codeck313/copernicus_motion" target="_blank">here</a>. In coming days will upload a documentation of what each function does, so stay tuned!</p>
<br>
<p><em>Also fun-fact you can subscribe to the blog using RSS! For Firefox users you can use <a href="https://addons.mozilla.org/en-US/firefox/addon/livemarks/?utm_source=addons.mozilla.org&amp;utm_medium=referral&amp;utm_content=search">Livemark</a> for this.</em></p>
<p><span style="color:green">$</span> press <kbd>CTRL</kbd>+<kbd>W</kbd> to end the session.</p>
<hr />
<!-- Note: There must be a blank line between every two lines of the footnote difinition.  -->
<p>[1] D. Fox, W. Burgard, and S.Thrun, "The dynamic window approach to collision avoidance", IEEE Robotics Automation Magazine, 1997.</p>

        </article>
        <br>
        <hr class="rounded">
        <div id="disqus_thread"></div>
        <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://thelowesttype-github-io.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </div>
  </div>
</div>


  
    
<footer class="footer text-muted">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 order-last order-lg-first">
				<ul class="list-inline">
					
						<li class="list-inline-item">Follow me on <a href="https://github.com/codeck313" target="_blank">Github</a>, <a href="https://linkedin.com/in/saksham-sharma-98678ab7" target="_blank">Linkedin</a> and <a href="https://instagram.com/c0deck313" target="_blank">Instagram</a></li>
					
				</ul>
			</div>
			<div class="col-lg-8 order-first order-lg-last text-lg-end">
				<ul class="list-inline">
					
						
							<li class="list-inline-item"><a href="https://thelowesttype.github.io/privacy-policy/">Privacy</a></li>
						
					
				</ul>
			</div>
		</div>
	</div>
</footer>

  

  
<script src="https://thelowesttype.github.io/js/main.js" defer></script>

  <script src="https://thelowesttype.github.io/plugins/elasticlunr.min.js" defer></script>
  <script src="https://thelowesttype.github.io/search_index.en.js" defer></script>
  <script src="https://thelowesttype.github.io/js/search.js" defer></script>


    <script src="https://thelowesttype.github.io/js/jquery.js"></script>
  <script src="https://thelowesttype.github.io/js/transition.js"></script>
</body>
</html>
